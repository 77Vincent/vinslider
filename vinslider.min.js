const Vinslider=function(a,b){void 0!=a&&(this.preset={speed:5e3,pager:!0,controller:!0,auto:!0,infinite:!0,gutter:0,percentGutter:!1,startFrom:0,direction:!0,mode:"fade",enableClass:"active",amount:1,scrollable:!1,vertical:!1,moveBy:1},this.custom=b?b:this.preset,this.options=b?b:this.preset,this.dot,this.controller,this.prevBtn,this.nextBtn,this.ul=a.children[0],this.list=this.ul.children,this.mode={fade:"fade",slide:"slide",multiple:"multiple"},this.classname=["vinmain","vincontroller","vinbullet"],this.direction=["left","clientWidth","width"],this.timer,this.end,this.prevIndex,this.curIndex,this.nextIndex,this.prevLi,this.curLi,this.nextLi,this.itemNum=this.list.length,this.size,this.ifwrong=!1,this.init(a))};Vinslider.prototype={init:function(a){this.settingOptions(),this.modeInit(),this.responsive(),this.buildBullet(a),this.buildController(a),this.initFunction(this.options.startFrom),this.lifecircle(),this.autoPlay(this.options.speed),this.userEvent()},modeInit:function(){for(this.ul.className=this.classname[0],this.options.vertical&&(this.direction=["top","clientHeight","height"]),e=0;e<this.itemNum;e++){var b,a=this.list[e];this.options.mode==this.mode.multiple?(this.options.amount=this.options.amount<=1?2:this.options.amount,this.size=this.ul[this.direction[1]]/this.options.amount):this.size=this.ul[this.direction[1]],b=this.options.percentGutter?this.size*this.options.gutter:this.options.gutter;var c=this.options.mode==this.mode.multiple?b/(this.options.amount-1):1;this.size=this.size+c,a.style[this.direction[2]]=this.size-b+"px"}if(this.options.mode==this.mode.slide)for(i=0;i<this.itemNum;i++){var a=this.list[i];a.style.opacity=1}if(this.options.mode==this.mode.multiple){for(i=0;i<this.itemNum;i++){var a=this.list[i];a.style.opacity=1}this.options.pager=!1}},responsive:function(){function c(){b.modeInit(),b.lifecircle()}var a=!1,b=this;window.addEventListener("resize",function(){clearTimeout(a),a=setTimeout(c,300)})},settingOptions:function(){var a=this;!function(b){var d;for(d in b)b.hasOwnProperty(d)&&(a.options[d]=void 0!==a.custom[d]?a.custom[d]:a.preset[d])}(this.preset)},buildController:function(a){var b=document.createElement("ul");for(b.className=this.classname[1],a.appendChild(b),i=0;i<2;i++){var c=document.createElement("li");b.appendChild(c)}this.controller=b,this.prevBtn=this.controller.children[0],this.nextBtn=this.controller.children[1],0==this.options.controller&&(b.style.display="none")},buildBullet:function(a){var b=document.createElement("ul");for(b.className=this.classname[2],a.appendChild(b),i=0;i<this.itemNum;i++){var c=document.createElement("li");b.appendChild(c)}this.dot=b.children,0==this.options.pager&&(b.style.display="none")},lifecircle:function(){for(i=0;i<this.itemNum;i++){var a=this.list[i],b=this.dot[i],c=a.className;a.className="",b.className="",c==this.options.enableClass&&(a.className=this.options.enableClass,b.className=this.options.enableClass,this.curIndex=i,this.curLi=this.list[this.curIndex])}if(this.prevIndex=this.curIndex-1,this.nextIndex=this.curIndex+1,this.prevLi=this.list[this.curIndex-1],this.nextLi=this.list[this.curIndex+1],this.options.mode==this.mode.slide||this.options.mode==this.mode.multiple)for(e=0;e<this.itemNum;e++){var d=e-this.curIndex;this.list[e].style[this.direction[0]]=this.size*d+"px"}},initFunction:function(a){0>a||a>this.itemNum||(this.list[a].className=this.options.enableClass)},autoPlay:function(a){var b=this;this.options.auto&&(this.timer=setInterval(function(){b.options.direction?b.forward():b.backward()},a))},resetAutoPlay:function(){clearTimeout(this.timer),this.autoPlay(this.options.speed)},userEvent:function(){var a=this;for(this.nextBtn.onclick=function(){a.forward(),a.resetAutoPlay()},this.prevBtn.onclick=function(){a.backward(),a.resetAutoPlay()},this.options.scrollable&&(this.ul.onwheel=function(b){b.preventDefault(),b.deltaY>0||b.deltaX>0?(a.forward(),a.resetAutoPlay()):(a.backward(),a.resetAutoPlay())}),i=0;i<this.itemNum;i++)this.dot[i].onclick=function(){var b=Array.prototype.indexOf.call(a.dot,this);for(e=0;e<a.itemNum;e++)a.list[e].className="",a.dot[e].className="";a.list[b].className=a.options.enableClass,a.lifecircle(),a.resetAutoPlay()}},ifStop:function(){this.end=parseInt(this.list[this.itemNum-1].style[this.direction[0]])<this.ul[this.direction[1]]},forward:function(){for(var a=0;a<this.options.moveBy;a++)this.ifStop(),this.options.mode!==this.mode.multiple?this.nextIndex<this.itemNum?(this.curLi.className="",this.nextLi.className=this.options.enableClass):this.options.infinite&&(this.curLi.className="",this.list[0].className=this.options.enableClass):this.end?this.options.infinite&&(this.curLi.className="",this.list[0].className=this.options.enableClass):(this.curLi.className="",this.nextLi.className=this.options.enableClass),this.lifecircle()},backward:function(){for(var a=0;a<this.options.moveBy;a++)this.ifStop(),this.prevIndex>=0?(this.curLi.className="",this.prevLi.className=this.options.enableClass):this.options.infinite&&(this.options.mode==this.mode.multiple?(this.curLi.className="",this.list[this.itemNum-this.options.amount].className=this.options.enableClass):(this.curLi.className="",this.list[this.itemNum-1].className=this.options.enableClass)),this.lifecircle()}};